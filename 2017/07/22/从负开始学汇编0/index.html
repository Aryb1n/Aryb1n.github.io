<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.0 -->
    <script>
        window.materialVersion = "1.5.0"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">

    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net/npm/hexo-material@1.4.0/source"/>














    <!-- Title -->
    
    <title>
        
            从负开始学汇编0 | 
        
        Aryb1n&#39;s notebook
    </title>

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Aryb1n">
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content="">

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(window.oldVersion){var remove=window.oldVersion.reduce(function(p,c){return p||data.indexOf("/*"+c+"*/")!==-1},false);if(remove){lsloader.removeLS(key)}}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload,isJs){if(typeof cssonload==="boolean"){isJs=cssonload;cssonload=undefined}isJs=isJs||false;cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload,isJs);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload,isJs);return}code=code.split(versionString)[1];if(isJs){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload,isJs)}};lsloader.requestResource=function(name,path,cssonload,isJs){var that=this;if(isJs){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else{this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon-new.png">
    <link rel="icon" sizes="192x192" href="/img/favicon-new.png">
    <link rel="apple-touch-icon" href="/img/favicon-new.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Aryb1n&#39;s notebook">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","https://cdn.jsdelivr.net/npm/hexo-material@1.4.0/source/css/material.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","https://cdn.jsdelivr.net/npm/hexo-material@1.4.0/source/css/style.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg.jpg);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icon -->

    <style>
        @font-face {
            font-family: 'Material Icons';
            font-style: normal;
            font-weight: 400;
            src: local('Material Icons'),
            local('MaterialIcons-Regular'),
            url(https://cdn.jsdelivr.net/npm/hexo-material@1.4.0/source/fonts/MaterialIcons-Regular.woff2) format('woff2'),
            url(https://cdn.jsdelivr.net/npm/hexo-material@1.4.0/source/fonts/MaterialIcons-Regular.woff) format('woff'),
            url(https://cdn.jsdelivr.net/npm/hexo-material@1.4.0/source/fonts/MaterialIcons-Regular.ttf) format('truetype');
        }
    </style>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js", true)</script>
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="从负开始学汇编0 | Aryb1n&#39;s notebook">
    <meta property="og:image" content="http://yoursite.com/img/favicon-new.png" />
    <meta property="og:description" content="">
    

    
        <meta property="article:published_time" content="Sat Jul 22 2017 11:11:11 GMT+0800" />
        <meta property="article:modified_time" content="Sun Jul 23 2017 17:23:30 GMT+0800" />
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="从负开始学汇编0 | Aryb1n&#39;s notebook">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="http://yoursite.com/img/favicon-new.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="http://yoursite.com" />

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2017/07/22/从负开始学汇编0/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://yoursite.com/2017/07/22/从负开始学汇编0/index.html",
    "headline": "从负开始学汇编0",
    "datePublished": "Sat Jul 22 2017 11:11:11 GMT+0800",
    "dateModified": "Sun Jul 23 2017 17:23:30 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Aryb1n",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "天道酬勤, 厚德载物"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Aryb1n&#39;s notebook",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon-new.png"
        }
    },
    "keywords": "",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第一天"><span class="post-toc-number">1.</span> <span class="post-toc-text">第一天</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#main"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">main</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#关于"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">关于</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#关于调用规约"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">关于调用规约</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                从负开始学汇编0
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Aryb1n</strong>
        <span>7月 22, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="第一天"><a href="#第一天" class="headerlink" title="第一天"></a>第一天</h2><p>一句一句看一下昨天的pwn1,超简单,几行代码的</p>
<h3 id="main"><a href="#main" class="headerlink" title="main"></a>main</h3><pre class="line-numbers language-asm"><code class="language-asm">push    ebp
 mov    ebp, esp
 and    esp, 0FFFFFFF0h     ; 这里是对齐esp到16字节
 sub    esp, 10h            ; 抬高栈顶,相当于分配了16字节空间
 mov    dword ptr [esp], 1  ; 像栈里推入4字节 0x1,相当于push 1
 call   _alarm              ; 调用函数alarm(1), 1是上一步分的
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我拿gdb调试的时候</p>
<p>我们暂停一下,这个时候的栈应该是</p>
<p>到了and这句之前</p>
<pre class="line-numbers language-asm"><code class="language-asm">EBP: 0xffffcbe8
ESP: 0xffffcbe8
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>and之后</p>
<pre class="line-numbers language-asm"><code class="language-asm">EBP: 0xffffcbe8
ESP: 0xffffcbe0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>sub esp, 0xfffffff0</code>之后</p>
<pre class="line-numbers language-asm"><code class="language-asm">EBP: 0xffffcbe8
ESP: 0xffffcbd0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>mov DWORD PTR [esp],0x1</code>后,esp没变化<br>相当于是在栈顶<code>esp=0xffffcbd4</code>的时候执行了<code>push 0x1</code>,使得<code>esp = esp - 4</code><br><code>push xxx</code>和<code>mov DWORD PTR [esp], xxx</code>作用和区别:<br>一个会使esp变化一个不会</p>
<p>并且此时<code>x/x $esp</code>得到栈顶上的值是<code>0x01</code><br>好了,啰嗦了好多,像小学生一样</p>
<p><code>call 0x8048400</code> (IDA里看到的<code>call _alarm</code>)的时候,我们跟进看一下</p>
<pre class="line-numbers language-asm"><code class="language-asm">_alarm proc near
       jmp ds:off_804A014
_alarm endp
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>再跟着跳过去,发现这个<code>ds:off_804A014</code>是属于<code>.got.plt</code></p>
<pre class="line-numbers language-asm"><code class="language-asm">.got.plt:0804A014  offset_804A014 dd offset alarm
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后我们不跟着他了,我们直接到<code>alarm</code>跑完到下一句</p>
<p>这个时候我们发现栈里的数据还没清理<br>我们alarm的形参<code>0x1</code>还在栈顶丢着<br>C里函数调用默认是<code>cdel</code>,从右到左压参数,caller清理现场,可没见到清理现场啊</p>
<p>接着看下面的代码</p>
<pre class="line-numbers language-asm"><code class="language-asm">
   0x80485a4:    call   0x8048400 <alarm@plt>
=> 0x80485a9:    mov    eax,ds:0x804a044 ;这句的0x804a044在IDa里是STDIN
   0x80485ae:    mov    DWORD PTR [esp+0x4],0xxxxxx0h    ;0
   0x80485b6:    mov    DWORD PTR [esp],eax  ;STDIN
   0x80485b9:    call   0x80483e0 <setbuf@plt>   ; setbuf(STDIN, 0)
   0x80485be:    mov    eax,ds:0x804a060
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我们跑过压参数的这两句,然后stack里是这样子</p>
<pre class="line-numbers language-asm"><code class="language-asm">0000| 0xffffcbd0 --> 0xf7f9a5a0
0004| 0xffffcbd4 --> 0x0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>我装的是peda插件,最左边是相对于esp偏移(十进制的),偏移越小肯定是离栈顶越近咯<br>可以看到原来的栈顶<code>0xffffcbd0</code>这里存的是<code>0x1</code>来着<br>诶?看这个样子被调用者自己清理了栈???这个形参算是caller的还是calle的啊</p>
<p>跟一下<code>setbuf</code></p>
<pre class="line-numbers language-asm"><code class="language-asm">=> 0xf7e4dff0 <setbuf>:    sub    esp,0x10
   0xf7e4dff3 <setbuf+3>:    push   0x2000
   0xf7e4dff8 <setbuf+8>:    push   DWORD PTR [esp+0x1c]
   0xf7e4dffc <setbuf+12>:    push   DWORD PTR [esp+0x1c]
   0xf7e4e000 <setbuf+16>:    call   0xf7e48210 <setbuffer>
   0xf7e4e005 <setbuf+21>:    add    esp,0x1c
   0xf7e4e008 <setbuf+24>:    ret
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有点迷…..</p>
<p>喝了口水,反应过来是这样子的,前面看到的几个函数都是<code>glibc</code>里提供的…<br>这里有一个延迟加载的措施,其实比较复杂,我们进入到的这个<code>setbuf</code>,只是<code>glibc</code>里的一个跳台,这个帮真正的<code>setbuf</code>把参数压进去,然后才调到真正起作用的<code>setbuffer</code></p>
<p>这里的<code>setbuf</code>调用<code>setbuffer</code>的地方倒是像是<code>cdel</code><br>先从坐到右参数压了栈</p>
<pre class="line-numbers language-asm"><code class="language-asm">0000| 0xffffcbb0 --> 0xf7f9a5a0 ;STDIN
0004| 0xffffcbb4 --> 0x0    ; 0
0008| 0xffffcbb8 --> 0x2000 ; 不知道是啥
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>然后调<code>setbuffer</code><br>最后调用之后<code>add esp, 0x1c</code> 对应原来的<code>sub esp, 0x10</code><br>很明显这多出来的<code>0x0c</code>是caller<code>setbuf</code>对堆栈的清理<br>把给callee<code>setbuffer</code>传的三个参数给清理掉</p>
<p>再跟一下<code>stebuffer</code>,发现和我们想的是一样的了</p>
<pre class="line-numbers language-asm"><code class="language-asm">0000| 0xffffcbac --> 0xf7e4e005  ;ret_addr
0004| 0xffffcbb0 --> 0xf7f9a5a0  ;arg1
0008| 0xffffcbb4 --> 0x0         ;arg2
0012| 0xffffcbb8 --> 0x2000 ('') ;arg3
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>下面是<code>0xf7e4e005</code>的具体逻辑就不看了<br>我们直接跳出<code>setbuffer</code>, 跳出<code>setbuf</code><br>回来<code>main</code>里</p>
<h3 id="关于"><a href="#关于" class="headerlink" title="关于"></a>关于</h3><p>别看到返回地址就打断点,那个返回地址是栈里的,你没法打断<br>打断点好像只能在<code>.text段</code></p>
<p>callee清理栈方式</p>
<pre class="line-numbers language-asm"><code class="language-asm">ret n
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>caller清理栈方式</p>
<pre class="line-numbers language-asm"><code class="language-asm">add esp, 0x0c
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>我们回到main,下面又是两个一毛一样的<code>stebuf</code></p>
<pre class="line-numbers language-asm"><code class="language-asm">=> 0x80485be:    mov    eax,ds:0x804a060
   0x80485c3:    mov    DWORD PTR [esp+0x4],0x0
   0x80485cb:    mov    DWORD PTR [esp],eax
   0x80485ce:    call   0x80483e0 <setbuf@plt> ; setbuf(sdout, 0)
   0x80485d3:    mov    eax,ds:0x804a040
   0x80485d8:    mov    DWORD PTR [esp+0x4],0x0
   0x80485e0:    mov    DWORD PTR [esp],eax
   0x80485e3:    call   0x80483e0 <setbuf@plt> ; setbuf(stderror, 0)
   0x80485e8:    mov    DWORD PTR [esp],0x8048690 ; "puts your name:"
   0x80485ef:    call   0x8048410 <puts@plt> ;puts("puts your name")
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这里也看清楚了call的是<code>&lt;setbuf@plt&gt;</code><br>其实读代码大概是这样子的<br>诶,我有个疑问,这个代码怎么感觉和我调试的不太一样啊,我看蠢了等下</p>
<p>先看下main这里的代码</p>
<pre class="line-numbers language-asm"><code class="language-asm">gdb-peda$ x/10i 0x8048594
   0x8048594:    push   ebp
   0x8048595:    mov    ebp,esp
   0x8048597:    and    esp,0xfffffff0
   0x804859a:    sub    esp,0x10
   0x804859d:    mov    DWORD PTR [esp],0x1
   0x80485a4:    call   0x8048400 <alarm@plt>
   0x80485a9:    mov    eax,ds:0x804a044
   0x80485ae:    mov    DWORD PTR [esp+0x4],0x0
   0x80485b6:    mov    DWORD PTR [esp],eax
   0x80485b9:    call   0x80483e0 <setbuf@plt>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>然后跟着过去看下<code>call   0x80483e0 &lt;setbuf@plt&gt;</code></p>
<pre class="line-numbers language-asm"><code class="language-asm">gdb-peda$ x/10i 0x80483e0
   0x80483e0 <setbuf@plt>:    jmp    DWORD PTR ds:0x804a00c
   0x80483e6 <setbuf@plt+6>:    push   0x0
   0x80483eb <setbuf@plt+11>:    jmp    0x80483d0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>大概是这样子的</p>
<pre class="line-numbers language-asm"><code class="language-asm">+----------------+-------------------+-----------
    ELF               PLT表             GOT表
+----------------+-------------------+----------
call <setbuf@plt> =>  jmp *0x804a00c =>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>这个plt是不允许写的,但这个GOT很明显是可以写的,但如果动态链接的话,在你编译的时候没法确定这个你要调用的库函数的地址,所以很明显这个GOT很明显开始放的不是真正的setbuf的地址</p>
<p>准确的说是,在setbuf第一次调用的时候,setbuf的got表项<code>&lt;setbuf@got.plt&gt;</code>里存的是<code>&lt;setbuf@plt+6&gt;</code>的地址,现在看看我们的<code>plt表</code>,是不是发现有三条</p>
<pre class="line-numbers language-asm"><code class="language-asm">0x80483e0 <setbuf@plt>:    jmp    DWORD PTR ds:0x804a00c
0x80483e6 <setbuf@plt+6>:    push   0x0
0x80483eb <setbuf@plt+11>:    jmp    0x80483d0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>这个我们会从<code>&lt;setbuf@got.plt&gt;</code>调到这个<code>&lt;setbuf@plt+6&gt;</code>,然后走到<code>&lt;setbuf@plt+11&gt;</code>,这里会jmp一下,jmp到哪里了呢,我们看下<code>0x80483d0</code>这个地址</p>
<pre class="line-numbers language-asm"><code class="language-asm">gdb-peda$ x/10i 0x80483d0
   0x80483d0:    push   DWORD PTR ds:0x804a004
   0x80483d6:    jmp    DWORD PTR ds:0x804a008   ;jmp *0x804a008 不是 jmp 0x0804a008
   0x80483dc:    add    BYTE PTR [eax],al
   0x80483de:    add    BYTE PTR [eax],al

   0x80483e0 <setbuf@plt>:    jmp    DWORD PTR ds:0x804a00c
   0x80483e6 <setbuf@plt+6>:    push   0x0
   0x80483eb <setbuf@plt+11>:    jmp    0x80483d0

   0x80483f0 <read@plt>:    jmp    DWORD PTR ds:0x804a010
   0x80483f6 <read@plt+6>:    push   0x8
   0x80483fb <read@plt+11>:    jmp    0x80483d0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>跳到了这个其实是<code>plt</code>表的开头,你可以发现<br>这个<code>plt</code>除了最开始的两句算是公共的表项,剩下的每个函数对应三句话,第三局都是跳转到plt表的开头,之后应该是又跳到什么地方然后把对应的GOT标表项改过来了就完结了吧</p>
<p>大概是这样子<br>setbuf第一次调用</p>
<pre class="line-numbers language-asm"><code class="language-asm">main => <setbuf@plt> => <setbuf@got.plt> => <setbuf@plt+6> => <setbuf@plt+11> => plt表首 => 然后不知道经过了啥 => <setbuf@got.plt>里填上了真的setbuf的地址
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>拿出来我的小书书查了下这个不知道经过啥其实是在<code>plt</code>表首jmp到了一下<code>_dl_runtime_resolve()</code>,函数完成了地址绑定</p>
<pre class="line-numbers language-asm"><code class="language-asm">gdb-peda$ x/10i *0x804a008 ;注意是取出jmp * ,别把星号丢了
   0xf7fedf00:    push   eax
   0xf7fedf01:    push   ecx
   0xf7fedf02:    push   edx
   0xf7fedf03:    mov    edx,DWORD PTR [esp+0x10]
   0xf7fedf07:    mov    eax,DWORD PTR [esp+0xc]
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>上网查了下这一段确实是<code>_dl_runtime_resolve()</code>的源码<br>还有补充说是<code>.got.plt</code>的前三项(每一项4字节)代表的分别是</p>
<pre class="line-numbers language-asm"><code class="language-asm">0x804a000:    0x08049f14      ; .dynamic段地址
0x804a004:  0xf7ffd918      ; module_id
0x804a008:  0xf7fedf00      ; dl_runtime_resolve地址
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>setbuf第n次调用</p>
<pre class="line-numbers language-asm"><code class="language-asm">main => <setbuf@plt> => <setbuf@got.plt> => 成功调用
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>好吧,动态绑定这一块好像都搞清楚了<br>刚说到哪里了,对.我们走走走,回到了main里,我们刚刚是调用了puts</p>
<pre class="line-numbers language-asm"><code class="language-asm">=> 0x80485ef:    call   0x8048410 <puts@plt>
   0x80485f4:    call   0x804854d
   0x80485f9:    mov    eax,0x0
   0x80485fe:    leave  
   0x80485ff:    ret
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我们看<code>0x0804854d</code>这里调用了什么函数</p>
<pre class="line-numbers language-asm"><code class="language-asm">=> 0x804854d:    push   ebp
   0x804854e:    mov    ebp,esp
   0x8048550:    sub    esp,0x98         ; 栈抬高0x98 => old_esp = esp + 0x98
   0x8048556:    mov    DWORD PTR [esp+0x8],0x100    ; 这个是后面要调用的函数的arg3
   0x804855e:    lea    eax,[ebp-0x88]   ; 这个时候[ebp-0x88]相当于[old_esp - 0x88] => [esp + 0x10] ; 其实这个换算了也没啥意思,因为是lea,传地址,用谁算都一样
   ; 我的$esp =  0xffffcb30 , 所以这句之后$eax = 0xffffcb30 + 0x10 = 0xffffcb40
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>mov ebp, esp</code>后,栈里的数据</p>
<pre class="line-numbers language-asm"><code class="language-asm">0000 0xffffcbc8 --> 0xffffcbe8      ;ebp
0004 0xffffcbcc --> 0x80485f9       ;ret_addr
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>再接着看</p>
<pre class="line-numbers language-asm"><code class="language-asm">   0x804855e:    lea    eax,[ebp-0x88]               ; $eax = 0xffffcb40
=> 0x8048564:    mov    DWORD PTR [esp+0x4],eax      ; arg2 = $eax
   0x8048568:    mov    DWORD PTR [esp],0x0          ; arg1 = 0x0
   0x804856f:    call   0x80483f0 <read@plt>         ; read(0x0, 0xffffcb40, 0x100)
   0x8048574:    mov    DWORD PTR [esp+0x8],0x100
   0x804857c:    lea    eax,[ebp-0x88]
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>看到这里,发现是给调用了<code>read</code>,其实这里的<code>arg2</code>的值是什么不重要,重要的是他是<code>[ebp-0x88]</code>,就是说他离<code>ebp</code>有<code>0x88</code>的距离,大概是这样子<br>压完3个参数,但还没call之前栈里大概是这样子的</p>
<pre class="line-numbers language-asm"><code class="language-asm">0xffffcb30  +----------------------+  [esp] = arg1 
                arg1 [0x0]
0xffffcb34  +----------------------+  [esp+0x4] = arg2
                arg2 [0xffffcb40] -------------------------------+
0xffffcb38  +----------------------+  [esp+0x8] = arg3           |
                arg3 [0x100]                                     |
0xffffcb40  +----------------------+  [esp+0x10]                 |
               0x88个字节的缓冲区  <-----------------------------+
0xffffcbc8  +----------------------+  [esp+0x98] [ebp]; 开始抬起来0x98
                EBP
0xffffcbcc  +----------------------+  [esp+0x9c] 
                ret_addr
0xffffcbd0  +----------------------+  [esp+0x100]
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这样子写入地址距离ebp是0x88,但read可写入0x100的数据,这样子我们就能覆盖到返回地址<code>ret_addr</code></p>
<p>理论上我们只要构造</p>
<pre class="line-numbers language-python"><code class="language-python">python <span class="token operator">-</span>c <span class="token string">"print 0x88 * 'A' + 'ABCD' + our_ret_addr"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>就能填满0x88大小的缓冲区,用<code>ABCD</code>覆盖4字节的EBP,然后更改返回地址</p>
<p>然后我们查了一下checksec</p>
<pre class="line-numbers language-asm"><code class="language-asm">gdb-peda$ checksec
CANARY    : disabled
FORTIFY   : disabled
NX        : ENABLED
PIE       : disabled
RELRO     : Partial
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>发现开了<code>NX</code>,堆栈不可执行,所以我们,可以使用<code>ret2libc</code>的方法<br>不知道为什么这题到了<code>read</code>这里没有提示我输入…</p>
<p>所以我是<code>start &lt; in.data</code>这样子调试的,确认了一下,这个字节数是正确的</p>
<p>然后写完poc发现不能用,这个时候上网查找了一下,pwntools有启<code>gdb</code>的功能,让我试试</p>
<pre class="line-numbers language-python"><code class="language-python">p <span class="token operator">=</span> process<span class="token punctuation">(</span><span class="token string">'./pwn1'</span><span class="token punctuation">)</span>
context<span class="token punctuation">.</span>terminal <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'gnome-terminal'</span><span class="token punctuation">,</span><span class="token string">'-x'</span><span class="token punctuation">,</span><span class="token string">'sh'</span><span class="token punctuation">,</span><span class="token string">'-c'</span><span class="token punctuation">]</span>
gdb<span class="token punctuation">.</span>attach<span class="token punctuation">(</span>p<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>简直不能太赞,但似乎,有一点问题,我怎么让停在第一句呢,去翻了翻官网</p>
<blockquote>
<p>Attaching to processes with attach() is useful, but the state the process is in may vary. If you need to attach to a process very early, and debug it from the very first instruction (or even the start of main), you instead should use debug()</p>
</blockquote>
<p>哦,我不应该用attach,应该是用<code>gdb.debug()</code><br>差不多,是这样子的</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">if</span> debug <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
    p <span class="token operator">=</span> gdb<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'/home/haibin/nsctf/pwn/pwn1'</span><span class="token punctuation">,</span><span class="token triple-quoted-string string">'''
    start
    continue
    '''</span><span class="token punctuation">)</span> 
<span class="token keyword">else</span><span class="token punctuation">:</span>
    p <span class="token operator">=</span> remote<span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">6666</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>试了好多次,好像这里必须写成<code>start continue</code>才会刚好停在<code>main</code>的入口处…别的要不报错,要不停的太远…吐血<br>不过这个半路就GG了,连接被重置,气死了…<br>迷之.因为我payload没写完,这个时候我在最后加了一句</p>
<pre class="line-numbers language-python"><code class="language-python">p<span class="token punctuation">.</span>interactive<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>突然发现都好了…醉了<br>大概是明白了,脚本执行完之后就会断开,这里加了这句,拖住了他???<br>这样子好像行不通….这个<code>p.interactive()</code>会拖住脚本的运行<br>把他加在最后面的话,前面的脚本还是相当于都执行完了,而如果把他加在最前面那相当于这句话之后的脚本都不执行了…</p>
<p>心碎,要睡一觉</p>
<p>代码里有一个leave指令其实相当于</p>
<pre class="line-numbers language-asm"><code class="language-asm">mov esp, ebp
pop ebp
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>当然这个<code>pop ebp</code>之后,<code>esp</code>又会<code>esp+4</code>对吧</p>
<h3 id="关于调用规约"><a href="#关于调用规约" class="headerlink" title="关于调用规约"></a>关于调用规约</h3><pre class="line-numbers language-c"><code class="language-c">__cdecl       caller清理参数<span class="token punctuation">,</span>右向左入栈
__stdcall     callee清理参数<span class="token punctuation">,</span>右向左入栈
__fastcall    callee清理参数<span class="token punctuation">,</span>前两个参数寄存器传参数<span class="token punctuation">,</span>其余右向左压入栈
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>fastcall寄存器传参,所以叫fast,使用高性能场合<br>可变长参数函数只能使用<code>__cdecl</code>,网上的解释是说只有调用者才知道传入了多少参数,以用来清理参数,回收栈空间,这个理由没法说服我,也许是我没有完全理解</p>
<p>另外</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> WINAPI     __stdcall</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/07/23/从负开始学汇编1/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/07/20/阶段性总结/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Aryb1n's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        841010857@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/07/">七月 2018<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/06/">六月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/05/">五月 2018<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">四月 2018<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">一月 2018<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/11/">十一月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/10/">十月 2017<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">九月 2017<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/08/">八月 2017<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">38</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">13</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">52</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">26</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">13</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/09/">九月 2016<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/07/">七月 2016<span class="sidebar_archives-count">13</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/issue/">issue<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/trick/">trick<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/categories/writeup/">writeup<span class="sidebar_archives-count">24</span></a></li><li><a class="sidebar_archives-link" href="/categories/writeup/学习/">学习<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/咸鱼/">咸鱼<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/备忘/">备忘<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/学习/">学习<span class="sidebar_archives-count">35</span></a></li><li><a class="sidebar_archives-link" href="/categories/日记/">日记<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/categories/笔记/">笔记<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">label</i>
                
                标签
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="友链">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                友链
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Aryb1n's notebook
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","https://cdn.jsdelivr.net/npm/hexo-material@1.4.0/source/js/lazyload.min.js", true)</script>



    <script>lsloader.load("js_js","https://cdn.jsdelivr.net/npm/hexo-material@1.4.0/source/js/js.min.js", true)</script>



    <script>lsloader.load("np_js","https://cdn.jsdelivr.net/npm/hexo-material@1.4.0/source/js/nprogress.js", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
